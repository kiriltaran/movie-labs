(function(e){function t(t){for(var i,s,o=t[0],c=t[1],u=t[2],v=0,f=[];v<o.length;v++)s=o[v],a[s]&&f.push(a[s][0]),a[s]=0;for(i in c)Object.prototype.hasOwnProperty.call(c,i)&&(e[i]=c[i]);l&&l(t);while(f.length)f.shift()();return r.push.apply(r,u||[]),n()}function n(){for(var e,t=0;t<r.length;t++){for(var n=r[t],i=!0,o=1;o<n.length;o++){var c=n[o];0!==a[c]&&(i=!1)}i&&(r.splice(t--,1),e=s(s.s=n[0]))}return e}var i={},a={app:0},r=[];function s(t){if(i[t])return i[t].exports;var n=i[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=e,s.c=i,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)s.d(n,i,function(t){return e[t]}.bind(null,i));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=t,o=o.slice();for(var u=0;u<o.length;u++)t(o[u]);var l=c;r.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"034f":function(e,t,n){"use strict";var i=n("c21b"),a=n.n(i);a.a},"0ad7":function(e,t,n){"use strict";var i=n("f8cf"),a=n.n(i);a.a},"2ab5":function(e,t,n){"use strict";var i=n("eac4"),a=n.n(i);a.a},"2f05":function(e,t,n){},"3a42":function(e,t,n){"use strict";var i=n("7e55"),a=n.n(i);a.a},"56d7":function(e,t,n){"use strict";n.r(t);n("cadf"),n("551c"),n("097d");var i=n("2b0e"),a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("app-header"),n("el-main",{directives:[{name:"loading",rawName:"v-loading",value:e.isLoading,expression:"isLoading"}],staticClass:"main"},[n("transition",{attrs:{name:"el-fade-in-linear",mode:"out-in"}},[n("router-view")],1)],1)],1)},r=[],s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-header",{staticClass:"header"},[i("el-menu",{staticClass:"menu",attrs:{"default-active":e.$route.path,router:!0,mode:"horizontal"}},[i("a",{staticClass:"logo",attrs:{href:"/"}},[i("img",{staticClass:"logo-image",attrs:{src:n("cf05"),alt:"logo"}})]),i("el-menu-item",{attrs:{index:"/"}},[e._v("Popular")]),i("el-menu-item",{attrs:{index:"/favorites"}},[e._v("Favorites")]),i("search-input",{staticClass:"search"})],1)],1)},o=[],c=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-autocomplete",{attrs:{"fetch-suggestions":e.searchMovies,"trigger-on-focus":!1,"prefix-icon":"el-icon-search","value-key":"title"},on:{select:e.onSelect},model:{value:e.query,callback:function(t){e.query=t},expression:"query"}})},u=[],l=(n("96cf"),n("3040")),v=n("bc3a"),f=n.n(v),d=f.a.create({baseURL:"https://api.themoviedb.org/3",params:{api_key:"feb97d72efaa362d5f6b7718a003614e"}}),p={getPopularMovies:function(e){return d({method:"GET",url:"/movie/popular",params:{page:e}}).then(function(e){return e.data})},getGenreList:function(){return d({method:"GET",url:"/genre/movie/list"}).then(function(e){return e.data})},getMovieInfo:function(e){return d({method:"GET",url:"/movie/".concat(e),params:{movie_id:e}}).then(function(e){return e.data})},getRelatedMovies:function(e){return d({method:"GET",url:"/movie/".concat(e,"/similar"),params:{movie_id:e}}).then(function(e){return e.data})},getMoviesByGenre:function(e,t){return d({method:"GET",url:"/discover/movie",params:{with_genres:e,page:t}}).then(function(e){return e.data})},searchMovies:function(e){return d({method:"GET",url:"/search/movie",params:{query:e}}).then(function(e){return e.data})}},m=p,h={name:"SearchInput",data:function(){return{query:""}},methods:{searchMovies:function(){var e=Object(l["a"])(regeneratorRuntime.mark(function e(t,n){var i,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m.searchMovies(t);case 3:i=e.sent,a=i.results,n(a),e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](0),window.console.log(e.t0);case 11:case"end":return e.stop()}},e,this,[[0,8]])}));return function(t,n){return e.apply(this,arguments)}}(),onSelect:function(e){this.$router.push({name:"movie",params:{id:e.id}}),this.query=""}}},g=h,_=n("2877"),b=Object(_["a"])(g,c,u,!1,null,null,null);b.options.__file="SearchInput.vue";var C=b.exports,y={name:"AppHeader",components:{SearchInput:C}},w=y,x=(n("6340"),Object(_["a"])(w,s,o,!1,null,"15688703",null));x.options.__file="AppHeader.vue";var k=x.exports;function O(e,t){localStorage.setItem(e,JSON.stringify(t))}function M(e){try{return JSON.parse(localStorage.getItem(e))}catch(e){throw e}}var $={name:"App",components:{AppHeader:k},computed:{isLoading:function(){return this.$store.getters.LOADING}},mounted:function(){this.loadGenres(),this.initFavorites()},methods:{loadGenres:function(){this.$store.dispatch("loadGenres")},initFavorites:function(){var e=M("favorites");e&&this.$store.dispatch("setFavorites",e)}}},E=$,R=(n("034f"),Object(_["a"])(E,a,r,!1,null,null,null));R.options.__file="App.vue";var S=R.exports,j=n("8c4f"),I=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"home-page"},[n("div",{staticClass:"title"},[e._v("Favorites")]),n("movies-list",{attrs:{movies:e.movies,"total-number":e.totalNumber},on:{"change-page":e.onChangePage}}),n("div",{staticClass:"title"},[e._v("Popular")]),n("movies-list",{attrs:{movies:e.movies,"total-number":e.totalNumber},on:{"change-page":e.onChangePage}})],1)},F=[],N=n("8afe"),G=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"list-popular"},[n("el-row",{staticClass:"movies",attrs:{gutter:20}},e._l(e.movies,function(e){return n("el-col",{key:e.id,staticClass:"movies-item",attrs:{span:6}},[n("movie-card",{staticClass:"movie-card",attrs:{movie:e}})],1)})),n("el-pagination",{attrs:{"page-size":20,"current-page":e.pageNumber,total:e.totalNumber>2e4?2e4:e.totalNumber,background:"",layout:"prev, pager, next"},on:{"current-change":e.onChangePage}})],1)},T=[],L=(n("c5f6"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-card",{staticClass:"movie-card",attrs:{"body-style":{padding:"0",display:"flex",height:"100%"},shadow:"hover"}},[n("div",{staticClass:"poster"},[n("img",{staticClass:"poster-image",attrs:{src:"http://image.tmdb.org/t/p/w185/"+e.movie.poster_path}})]),n("div",{staticClass:"info"},[n("div",{staticClass:"title"},[e._v("\n      "+e._s(e.movie.title)+"\n    ")]),n("div",{staticClass:"vote"},[e._v("\n      "+e._s(e.movie.vote_average)+"\n    ")]),n("div",{staticClass:"genre"},[n("div",[e._v("\n        Genre:\n      ")]),e._l(e.movie.genre_ids,function(t){return n("el-tag",{key:t,staticClass:"genre-tag",attrs:{size:"small"},nativeOn:{click:function(n){e.onClickGenre(t)}}},[e._v("\n        "+e._s(e.genres[t])+"\n      ")])})],2),n("div",{staticClass:"actions"},[n("el-button",{staticClass:"fav-btn",attrs:{icon:e.isInFavorites?"el-icon-star-on":"el-icon-star-off",type:"text"},on:{click:e.onClickFavorite}}),n("el-button",{staticClass:"more-btn",attrs:{type:"text"},on:{click:e.onClickMore}},[e._v("\n        More\n      ")])],1)])])}),P=[],A=(n("6762"),n("2fdb"),{name:"MovieCard",props:{movie:{type:Object,required:!0}},computed:{genres:function(){return this.$store.getters.GENRES},isInFavorites:function(){return this.$store.getters.FAVORITES.includes(this.movie.id)}},methods:{onClickMore:function(){this.$router.push({name:"movie",params:{id:this.movie.id}})},onClickGenre:function(e){this.$router.push({name:"genre",params:{id:e}})},onClickFavorite:function(){this.$store.dispatch("toggleFavorite",this.movie.id)}}}),V=A,D=(n("de58"),Object(_["a"])(V,L,P,!1,null,"6862cebe",null));D.options.__file="MovieCard.vue";var q=D.exports,H={name:"MoviesList",components:{MovieCard:q},props:{movies:{type:Array,default:function(){return[]}},totalNumber:{type:Number,default:0},pageNumber:{type:Number,default:1}},methods:{onChangePage:function(e){this.$emit("change-page",e)}}},J=H,z=(n("2ab5"),Object(_["a"])(J,G,T,!1,null,"0f4cf03d",null));z.options.__file="MoviesList.vue";var B=z.exports,U={name:"HomePage",components:{MoviesList:B},data:function(){return{movies:[],totalNumber:0}},mounted:function(){this.loadMovies(1)},methods:{loadMovies:function(){var e=Object(l["a"])(regeneratorRuntime.mark(function e(t){var n,i,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,this.$store.dispatch("setLoading",!0),e.next=4,m.getPopularMovies(t);case 4:n=e.sent,i=n.results,a=n.total_results,this.movies=Object(N["a"])(i),this.totalNumber=a,e.next=14;break;case 11:e.prev=11,e.t0=e["catch"](0),window.console.log(e.t0);case 14:return e.prev=14,this.$store.dispatch("setLoading",!1),e.finish(14);case 17:case"end":return e.stop()}},e,this,[[0,11,14,17]])}));return function(t){return e.apply(this,arguments)}}(),onChangePage:function(e){this.loadMovies(e)}}},K=U,Q=Object(_["a"])(K,I,F,!1,null,null,null);Q.options.__file="HomePage.vue";var W=Q.exports,X=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"movie-page"},[n("movie-info",{staticClass:"info",attrs:{movie:e.movie}}),n("movie-related",{staticClass:"related",attrs:{movies:e.related}})],1)},Y=[],Z=n("c93e"),ee=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"movie-info"},[n("el-row",{attrs:{gutter:20,type:"flex"}},[n("el-col",{attrs:{span:6}},[n("div",{staticClass:"poster"},[e.movie.poster_path?n("img",{staticClass:"poster-image",attrs:{src:"http://image.tmdb.org/t/p/w342/"+e.movie.poster_path}}):e._e()])]),n("el-col",{attrs:{span:18}},[n("div",{staticClass:"info"},[n("div",{staticClass:"info-title"},[e._v("\n          "+e._s(e.movie.title)+"\n          "),n("el-button",{staticClass:"fav-btn",attrs:{icon:e.isInFavorites?"el-icon-star-on":"el-icon-star-off",type:"text"},on:{click:e.onClickFavorite}})],1),n("div",{staticClass:"info-item"},[n("div",{staticClass:"key"},[e._v("Release date:")]),n("div",{staticClass:"value"},[e._v(e._s(e.movie.release_date))])]),n("div",{staticClass:"info-item"},[n("div",{staticClass:"key"},[e._v("Genre:")]),n("div",{staticClass:"value"},e._l(e.movie.genres,function(t){return n("el-tag",{key:t.id,staticClass:"genre-tag",nativeOn:{click:function(n){e.onClickGenre(t.id)}}},[e._v("\n              "+e._s(t.name)+"\n            ")])}))]),n("div",{staticClass:"info-item"},[n("div",{staticClass:"key"},[e._v("Budget:")]),n("div",{staticClass:"value"},[e._v(e._s(e.movie.budget)+"$")])]),n("div",{staticClass:"info-item"},[n("div",{staticClass:"key"},[e._v("Revenue:")]),n("div",{staticClass:"value"},[e._v(e._s(e.movie.revenue)+"$")])]),n("div",{staticClass:"info-item"},[n("div",{staticClass:"key"},[e._v("Homepage:")]),n("div",{staticClass:"value"},[n("a",{attrs:{href:e.movie.homepage}},[e._v(e._s(e.movie.homepage))])])]),n("div",{staticClass:"info-item"},[n("div",{staticClass:"key"},[e._v("Country:")]),n("div",{staticClass:"value"},e._l(e.movie.production_countries,function(t){return n("span",{key:t.name},[e._v("\n              "+e._s(t.name)+"\n            ")])}))]),n("div",{staticClass:"info-item"},[n("div",{staticClass:"key"},[e._v("Description:")]),n("div",{staticClass:"value"},[e._v(e._s(e.movie.overview))])])])])],1)],1)},te=[],ne={name:"MovieInfo",props:{movie:{type:Object,required:!0}},computed:{isInFavorites:function(){return this.$store.getters.FAVORITES.includes(this.movie.id)}},methods:{onClickGenre:function(e){this.$router.push({name:"genre",params:{id:e}})},onClickFavorite:function(){this.$store.dispatch("toggleFavorite",this.movie.id)}}},ie=ne,ae=(n("3a42"),Object(_["a"])(ie,ee,te,!1,null,"2681e866",null));ae.options.__file="MovieInfo.vue";var re=ae.exports,se=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"movie-related"},[e.isVisibleTitle?n("div",{staticClass:"title"},[e._v("Related movies")]):e._e(),n("el-row",{attrs:{gutter:20}},e._l(e.movies,function(e){return n("el-col",{key:e.id,attrs:{span:6}},[n("movie-card",{attrs:{movie:e}})],1)}))],1)},oe=[],ce={name:"MovieRelated",components:{MovieCard:q},props:{movies:{type:Array,default:function(){return[]}}},computed:{isVisibleTitle:function(){return this.movies.length>0}}},ue=ce,le=(n("cd2d"),Object(_["a"])(ue,se,oe,!1,null,"37a888c8",null));le.options.__file="MovieRelated.vue";var ve=le.exports,fe={name:"MoviePage",components:{MovieInfo:re,MovieRelated:ve},data:function(){return{movie:{},related:[]}},watch:{$route:function(){this.loadMovieInfo(this.$route.params.id),this.loadRelatedMovies(this.$route.params.id)}},mounted:function(){this.loadMovieInfo(this.$route.params.id),this.loadRelatedMovies(this.$route.params.id)},methods:{loadMovieInfo:function(){var e=Object(l["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,this.$store.dispatch("setLoading",!0),e.t0=Z["a"],e.t1={},e.next=6,m.getMovieInfo(t);case 6:e.t2=e.sent,this.movie=(0,e.t0)(e.t1,e.t2),e.next=13;break;case 10:e.prev=10,e.t3=e["catch"](0),window.console.log(e.t3);case 13:return e.prev=13,this.$store.dispatch("setLoading",!1),e.finish(13);case 16:case"end":return e.stop()}},e,this,[[0,10,13,16]])}));return function(t){return e.apply(this,arguments)}}(),loadRelatedMovies:function(){var e=Object(l["a"])(regeneratorRuntime.mark(function e(t){var n,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,this.$store.dispatch("setLoading",!0),e.next=4,m.getRelatedMovies(t);case 4:n=e.sent,i=n.results,this.related=i.filter(function(e,t){return t<4}),e.next=12;break;case 9:e.prev=9,e.t0=e["catch"](0),window.console.log(e.t0);case 12:return e.prev=12,this.$store.dispatch("setLoading",!1),e.finish(12);case 15:case"end":return e.stop()}},e,this,[[0,9,12,15]])}));return function(t){return e.apply(this,arguments)}}()}},de=fe,pe=(n("0ad7"),Object(_["a"])(de,X,Y,!1,null,"50e3c756",null));pe.options.__file="MoviePage.vue";var me=pe.exports,he=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"genre-page"},[n("movies-list",{attrs:{movies:e.movies,"total-number":e.totalNumber,"page-number":e.pageNumber},on:{"change-page":e.onChangePage}})],1)},ge=[],_e={name:"GenrePage",components:{MoviesList:B},data:function(){return{movies:[],totalNumber:0,pageNumber:1}},watch:{$route:function(){this.pageNumber=1,this.loadMovies(this.$route.params.id,this.pageNumber)}},mounted:function(){this.loadMovies(this.$route.params.id,this.pageNumber)},methods:{loadMovies:function(){var e=Object(l["a"])(regeneratorRuntime.mark(function e(t,n){var i,a,r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,this.$store.dispatch("setLoading",!0),e.next=4,m.getMoviesByGenre(t,n);case 4:i=e.sent,a=i.results,r=i.total_results,this.movies=Object(N["a"])(a),this.totalNumber=r,e.next=14;break;case 11:e.prev=11,e.t0=e["catch"](0),window.console.log(e.t0);case 14:return e.prev=14,this.$store.dispatch("setLoading",!1),e.finish(14);case 17:case"end":return e.stop()}},e,this,[[0,11,14,17]])}));return function(t,n){return e.apply(this,arguments)}}(),onChangePage:function(e){this.pageNumber=e,this.loadMovies(this.$route.params.id,e)}}},be=_e,Ce=Object(_["a"])(be,he,ge,!1,null,null,null);Ce.options.__file="GenrePage.vue";var ye=Ce.exports,we=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"favorites-page"},[n("movies-list",{attrs:{movies:e.movies,"total-number":e.favorites.length}})],1)},xe=[],ke=(n("ac4d"),n("8a81"),n("ac6a"),{name:"FavoritesPage",components:{MoviesList:B},data:function(){return{movies:[]}},computed:{favorites:function(){return this.$store.getters.FAVORITES}},mounted:function(){var e=this;this.$nextTick(function(){e.loadFavorites()})},methods:{loadFavorites:function(){var e=Object(l["a"])(regeneratorRuntime.mark(function e(){var t,n,i,a,r,s,o;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:e.prev=0,this.$store.dispatch("setLoading",!0),t=!0,n=!1,i=void 0,e.prev=5,a=this.favorites[Symbol.iterator]();case 7:if(t=(r=a.next()).done){e.next=16;break}return s=r.value,e.next=11,m.getMovieInfo(s);case 11:o=e.sent,this.movies.push(o);case 13:t=!0,e.next=7;break;case 16:e.next=22;break;case 18:e.prev=18,e.t0=e["catch"](5),n=!0,i=e.t0;case 22:e.prev=22,e.prev=23,t||null==a.return||a.return();case 25:if(e.prev=25,!n){e.next=28;break}throw i;case 28:return e.finish(25);case 29:return e.finish(22);case 30:e.next=35;break;case 32:e.prev=32,e.t1=e["catch"](0),window.console.log(e.t1);case 35:return e.prev=35,this.$store.dispatch("setLoading",!1),e.finish(35);case 38:case"end":return e.stop()}},e,this,[[0,32,35,38],[5,18,22,30],[23,,25,29]])}));return function(){return e.apply(this,arguments)}}()}}),Oe=ke,Me=Object(_["a"])(Oe,we,xe,!1,null,null,null);Me.options.__file="FavoritesPage.vue";var $e=Me.exports;i["default"].use(j["a"]);var Ee=new j["a"]({mode:"history",routes:[{path:"/",name:"home",component:W},{path:"/movie/:id",name:"movie",component:me},{path:"/genre/:id",name:"genre",component:ye},{path:"/favorites",name:"favorites",component:$e}]}),Re=(n("7f7f"),n("2f62"));i["default"].use(Re["a"]);var Se=new Re["a"].Store({state:{loading:!1,genres:{},favorites:[]},mutations:{SET_GENRES:function(e,t){var n={},i=!0,a=!1,r=void 0;try{for(var s,o=t[Symbol.iterator]();!(i=(s=o.next()).done);i=!0){var c=s.value;n[c.id]=c.name}}catch(e){a=!0,r=e}finally{try{i||null==o.return||o.return()}finally{if(a)throw r}}e.genres=Object(Z["a"])({},n)},SET_LOADING:function(e,t){e.loading=t},SET_FAVORITES:function(e,t){e.favorites=Object(N["a"])(t)},ADD_FAVORITE:function(e,t){e.favorites.push(t)},REMOVE_FAVORITE:function(e,t){e.favorites=e.favorites.filter(function(e){return e!==t})}},actions:{setLoading:function(e,t){var n=e.commit;n("SET_LOADING",t)},loadGenres:function(){var e=Object(l["a"])(regeneratorRuntime.mark(function e(t){var n,i,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=t.commit,e.prev=1,e.next=4,m.getGenreList();case 4:i=e.sent,a=i.genres,n("SET_GENRES",a),e.next=12;break;case 9:e.prev=9,e.t0=e["catch"](1),window.console.log(e.t0);case 12:case"end":return e.stop()}},e,this,[[1,9]])}));return function(t){return e.apply(this,arguments)}}(),toggleFavorite:function(e,t){var n=e.commit,i=e.state;i.favorites.includes(t)?n("REMOVE_FAVORITE",t):n("ADD_FAVORITE",t),O("favorites",i.favorites)},setFavorites:function(e,t){var n=e.commit;n("SET_FAVORITES",t)}},getters:{GENRES:function(e){return e.genres},LOADING:function(e){return e.loading},FAVORITES:function(e){return e.favorites}}}),je=n("5c96"),Ie=n.n(je),Fe=(n("0fae"),n("b2d6")),Ne=n.n(Fe);i["default"].use(Ie.a,{locale:Ne.a}),i["default"].config.productionTip=!1,new i["default"]({router:Ee,store:Se,render:function(e){return e(S)}}).$mount("#app")},6340:function(e,t,n){"use strict";var i=n("8860"),a=n.n(i);a.a},"7e55":function(e,t,n){},8860:function(e,t,n){},c21b:function(e,t,n){},cd2d:function(e,t,n){"use strict";var i=n("2f05"),a=n.n(i);a.a},cf05:function(e,t,n){e.exports=n.p+"img/logo.bf23e4f8.png"},de58:function(e,t,n){"use strict";var i=n("f1a3"),a=n.n(i);a.a},eac4:function(e,t,n){},f1a3:function(e,t,n){},f8cf:function(e,t,n){}});
//# sourceMappingURL=app.6e01ca3e.js.map